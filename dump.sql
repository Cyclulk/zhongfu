CREATE TABLE fos_user (id INT AUTO_INCREMENT NOT NULL, username VARCHAR(255) NOT NULL, username_canonical VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, email_canonical VARCHAR(255) NOT NULL, enabled TINYINT(1) NOT NULL, salt VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, last_login DATETIME DEFAULT NULL, locked TINYINT(1) NOT NULL, expired TINYINT(1) NOT NULL, expires_at DATETIME DEFAULT NULL, confirmation_token VARCHAR(255) DEFAULT NULL, password_requested_at DATETIME DEFAULT NULL, roles LONGTEXT NOT NULL COMMENT '(DC2Type:array)', credentials_expired TINYINT(1) NOT NULL, credentials_expire_at DATETIME DEFAULT NULL, UNIQUE INDEX UNIQ_957A647992FC23A8 (username_canonical), UNIQUE INDEX UNIQ_957A6479A0D96FBF (email_canonical), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE article (id INT AUTO_INCREMENT NOT NULL, avatar INT DEFAULT NULL, type INT DEFAULT NULL, titre VARCHAR(150) NOT NULL, slug LONGTEXT NOT NULL, contenu LONGTEXT NOT NULL, date DATE NOT NULL, is_vedette TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_23A0E661677722F (avatar), INDEX IDX_23A0E668CDE5729 (type), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE evenement (id INT AUTO_INCREMENT NOT NULL, avatar INT DEFAULT NULL, type INT DEFAULT NULL, titre VARCHAR(150) NOT NULL, slug VARCHAR(255) NOT NULL, contenu LONGTEXT NOT NULL, date DATE NOT NULL, is_vedette TINYINT(1) NOT NULL, UNIQUE INDEX UNIQ_B26681E1677722F (avatar), INDEX IDX_B26681E8CDE5729 (type), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE image (id INT AUTO_INCREMENT NOT NULL, article_id INT DEFAULT NULL, evenement_id INT DEFAULT NULL, name VARCHAR(255) NOT NULL, description VARCHAR(255) NOT NULL, file VARCHAR(255) NOT NULL, path VARCHAR(255) NOT NULL, INDEX IDX_C53D045F7294869C (article_id), INDEX IDX_C53D045FFD02F13 (evenement_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE poeme (id INT AUTO_INCREMENT NOT NULL, titre VARCHAR(255) NOT NULL, contenu LONGTEXT NOT NULL, date DATE NOT NULL, auteur VARCHAR(50) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE type (id INT AUTO_INCREMENT NOT NULL, name VARCHAR(50) NOT NULL, url VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE article ADD CONSTRAINT FK_23A0E661677722F FOREIGN KEY (avatar) REFERENCES image (id) ON DELETE SET NULL;
ALTER TABLE article ADD CONSTRAINT FK_23A0E668CDE5729 FOREIGN KEY (type) REFERENCES type (id);
ALTER TABLE evenement ADD CONSTRAINT FK_B26681E1677722F FOREIGN KEY (avatar) REFERENCES image (id) ON DELETE SET NULL;
ALTER TABLE evenement ADD CONSTRAINT FK_B26681E8CDE5729 FOREIGN KEY (type) REFERENCES type (id);
ALTER TABLE image ADD CONSTRAINT FK_C53D045F7294869C FOREIGN KEY (article_id) REFERENCES article (id) ON DELETE SET NULL;
ALTER TABLE image ADD CONSTRAINT FK_C53D045FFD02F13 FOREIGN KEY (evenement_id) REFERENCES evenement (id) ON DELETE SET NULL;
